<!DOCTYPE html><html><head>
    <title>Template Test</title>
    <script src="../template.js"></script>
    <script src="../../web-component-tester/browser.js"></script>
  </head>
  <body>
    <style>
      .container {
        display: flex;
      }
      .container > *{
        flex: 1;
      }
    </style>

    <div class="container">
      <template>
        <span id="content">Hello World!</span>
      </template>
    </div>

    <script>suite("Template",function(){function e(e,t){if(n)e.innerHTML=t;else{var o=document.createElement("div");o.innerHTML=t;for(var l=Array.prototype.slice.call(o.childNodes,0),d=0;d<l.length;d++)e.content.appendChild(l[d])}}var t;suiteSetup(function(){t=document.querySelector("template")});var n=function(){var e=document.createElement("div");try{return Object.defineProperty(e,"innerHTML",{get:function(){},set:function(){}}),!0}catch(e){return!1}}();test("No rendering",function(){var e=t.getBoundingClientRect();assert.equal(e.height,0),assert.equal(e.width,0)}),test("content",function(){assert.equal(t.childNodes.length,0,"template children evacipated"),assert.isDefined(t.content,"template content exists"),assert.equal(t.content.childNodes.length,3,"template content has expected number of nodes");var e=document.querySelector("#content");assert.isNull(e,"template content not in document")}),test("stamping",function(){document.body.appendChild(document.importNode(t.content,!0)),content=document.querySelector("#content"),assert.isDefined(content,"template content stamped into document")}),test("innerHTML",function(){n||this.skip();var e=document.createElement("template");assert.equal(e.innerHTML,"");var t="pre<div>Hi</div><div>Bye</div>post";e.innerHTML=t,assert.equal(e.innerHTML,t),assert.equal(e.content.childNodes.length,4),assert.equal(e.content.firstChild.textContent,"pre"),t="foo",e.innerHTML=t,assert.equal(e.innerHTML,t),assert.equal(e.content.childNodes.length,1),assert.equal(e.content.firstChild.textContent,t),t='-<->-"-&-';var o='-&lt;-&gt;-"-&amp;-',l=document.createElement("div");e.innerHTML=t,l.innerHTML=t,assert.equal(e.innerHTML,o),assert.equal(e.content.textContent,l.textContent)}),test("clone",function(){var t=document.createElement("template"),n="<div>Hi</div>";e(t,n);var o=t.cloneNode();assert.notEqual(o,t,"element is not cloned"),assert.isDefined(o.content,"cloned template content dne"),assert.equal(o.content.childNodes.length,0,"non-deep cloned template.content is not empty");var l=t.cloneNode(!0);assert.equal(l.content.childNodes.length,1,"deep cloned template.content is empty"),assert.notEqual(t.content.firstChild,l.content.firstChild,"cloned content is not different from source")}),test("clone nested",function(){var t=document.createElement("template"),n='a<template id="a">b<template id="b">c<template id="c">d</template></template></template>';e(t,n);var o=t.cloneNode(!1);assert.notEqual(o,t,"element is not cloned"),assert.isDefined(o.content,"cloned template content dne"),assert.equal(o.content.childNodes.length,0,"non-deep cloned template.content is not empty");var l=t.cloneNode(!0);assert.equal(l.content.childNodes.length,2,"deep cloned template.content is empty"),assert.notEqual(t.content.firstChild,l.content.firstChild,"cloned content is not different from source");var d=l.content.lastChild;assert.isDefined(d.content,"nested cloned template content dne"),assert.equal(d.content.childNodes.length,2,"deep cloned template.content is empty"),d=d.content.lastChild,assert.isDefined(d,"nested cloned template content dne"),assert.equal(d.content.childNodes.length,2,"deep cloned template.content is empty"),d=d.content.lastChild,assert.isDefined(d,"nested cloned template content dne"),assert.equal(d.content.childNodes.length,1,"deep cloned template.content is empty")}),test("clone node containing templates",function(){var t=document.createElement("div"),n=document.createElement("template"),o='a<template id="a">b<template id="b">c<template id="c">d</template></template></template>';e(n,o),t.appendChild(n);var l=t.cloneNode(!0),t=t.firstChild,d=l.firstChild;assert.equal(d.content.childNodes.length,2,"deep cloned template.content is empty"),assert.notEqual(t.content.firstChild,d.content.firstChild,"cloned content is not different from source");var c=d.content.lastChild;assert.isDefined(c.content,"nested cloned template content dne"),assert.equal(c.content.childNodes.length,2,"deep cloned template.content is empty"),c=c.content.lastChild,assert.isDefined(c,"nested cloned template content dne"),assert.equal(c.content.childNodes.length,2,"deep cloned template.content is empty"),c=c.content.lastChild,assert.isDefined(c,"nested cloned template content dne"),assert.equal(c.content.childNodes.length,1,"deep cloned template.content is empty")}),test("importNode",function(){var t=document.createElement("template"),n="<div>Hi</div>";e(t,n);var o=document.importNode(t,!1);assert.notEqual(o,t,"element is not cloned"),assert.isDefined(o.content,"cloned template content dne"),assert.equal(o.content.childNodes.length,0,"non-deep cloned template.content is not empty");var l=document.importNode(t,!0);assert.equal(l.content.childNodes.length,1,"deep cloned template.content is empty"),assert.notEqual(t.content.firstChild,l.content.firstChild,"cloned content is not different from source")}),test("importNode: nested",function(){var t=document.createElement("template"),n='a<template id="a">b<template id="b">c<template id="c">d</template></template></template>';e(t,n);var o=document.importNode(t,!1);assert.notEqual(o,t,"element is not cloned"),assert.isDefined(o.content,"cloned template content dne"),assert.equal(o.content.childNodes.length,0,"non-deep cloned template.content is not empty");var l=document.importNode(t,!0);assert.equal(l.content.childNodes.length,2,"deep cloned template.content is empty"),assert.notEqual(t.content.firstChild,l.content.firstChild,"cloned content is not different from source");var d=l.content.lastChild;assert.isDefined(d.content,"nested cloned template content dne"),assert.equal(d.content.childNodes.length,2,"deep cloned template.content is empty"),d=d.content.lastChild,assert.isDefined(d,"nested cloned template content dne"),assert.equal(d.content.childNodes.length,2,"deep cloned template.content is empty"),d=d.content.lastChild,assert.isDefined(d,"nested cloned template content dne"),assert.equal(d.content.childNodes.length,1,"deep cloned template.content is empty")}),test("importNode: element containing nested templates",function(){var t=document.createElement("div"),n=document.createElement("template"),o='a<template id="a">b<template id="b">c<template id="c">d</template></template></template>';e(n,o),t.appendChild(n);var l=document.importNode(t,!0);t=t.firstChild;var d=l.firstChild;assert.equal(d.content.childNodes.length,2,"deep cloned template.content is empty"),assert.notEqual(t.content.firstChild,d.content.firstChild,"cloned content is not different from source");var c=d.content.lastChild;assert.isDefined(c.content,"nested cloned template content dne"),assert.equal(c.content.childNodes.length,2,"deep cloned template.content is empty"),c=c.content.lastChild,assert.isDefined(c,"nested cloned template content dne"),assert.equal(c.content.childNodes.length,2,"deep cloned template.content is empty"),c=c.content.lastChild,assert.isDefined(c,"nested cloned template content dne"),assert.equal(c.content.childNodes.length,1,"deep cloned template.content is empty")}),test("importNode: templates have proper owner document",function(){var e=document.implementation.createHTMLDocument(""),t=e.createElement("div"),n=e.createElement("template"),o='a<template id="a">b<template id="b">c<template id="c">d</template></template></template>';n.innerHTML=o,t.appendChild(n);var l=document.importNode(t,!0);t=t.firstChild;var d=l.firstChild;assert.notEqual(t.ownerDocument,document),assert.equal(l.ownerDocument,document),assert.equal(d.ownerDocument,document)})});</script>
  

</body></html>