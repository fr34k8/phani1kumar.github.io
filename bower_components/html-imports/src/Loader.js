window.HTMLImports.addModule(function(i){var t=i.xhr,e=i.flags,n=function(i,t){this.cache={},this.onload=i,this.oncomplete=t,this.inflight=0,this.pending={}};n.prototype={addNodes:function(i){this.inflight+=i.length;for(var t,e=0,n=i.length;e<n&&(t=i[e]);e++)this.require(t);this.checkDone()},addNode:function(i){this.inflight++,this.require(i),this.checkDone()},require:function(i){var t=i.src||i.href;i.__nodeUrl=t,this.dedupe(t,i)||this.fetch(t,i)},dedupe:function(i,t){if(this.pending[i])return this.pending[i].push(t),!0;return this.cache[i]?(this.onload(i,t,this.cache[i]),this.tail(),!0):(this.pending[i]=[t],!1)},fetch:function(i,n){if(e.load&&console.log("fetch",i,n),i)if(i.match(/^data:/)){var h=i.split(","),o=h[0],s=h[1];s=o.indexOf(";base64")>-1?atob(s):decodeURIComponent(s),setTimeout(function(){this.receive(i,n,null,s)}.bind(this),0)}else{var c=function(t,e,h){this.receive(i,n,t,e,h)}.bind(this);t.load(i,c)}else setTimeout(function(){this.receive(i,n,{error:"href must be specified"},null)}.bind(this),0)},receive:function(i,t,e,n,h){this.cache[i]=n;for(var o,s=this.pending[i],c=0,d=s.length;c<d&&(o=s[c]);c++)this.onload(i,o,n,e,h),this.tail();this.pending[i]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}},i.Loader=n});