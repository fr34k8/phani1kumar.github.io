window.testRunner&&testRunner.dumpAsText();var Markup={};Markup.description=function(e){Markup._test_description=e},Markup.dump=function(e,t){"string"==typeof e&&(e=document.getElementById(e));var r=e||document,a="";if(Markup._dumpCalls++,Markup._dumpCalls>1||t?(t||(t="Dump of markup "+Markup._dumpCalls),Markup._dumpCalls>1&&(a+="\n"),a+="\n"+t+":\n"):Markup._firstCallDidNotHaveDescription=!0,a+=Markup.get(r),Markup._container||(Markup._container=document.createElement("pre"),Markup._container.style.width="100%"),2==Markup._dumpCalls&&Markup._firstCallDidNotHaveDescription){var n=Markup._container.getElementsByClassName("dump-as-markup-span")[0];n.insertBefore(document.createTextNode("\nDump of markup 1:\n"),n.firstChild)}if(r.getElementsByTagName)for(var u=r.getElementsByTagName("iframe"),o=0;o<u.length;o++){a+="\n\nFRAME "+o+":\n";try{a+=Markup.get(u[o].contentDocument.body.parentElement)}catch(e){a+="FIXME: Add method to layout test controller to get access to cross-origin frames."}}Markup._test_description&&1==Markup._dumpCalls&&Markup._container.appendChild(document.createTextNode(Markup._test_description+"\n"));var n=document.createElement("span");n.className="dump-as-markup-span",n.appendChild(document.createTextNode(a)),Markup._container.appendChild(n)},Markup.noAutoDump=function(){window.removeEventListener("load",Markup.notifyDone,!1)},Markup.waitUntilDone=function(){window.testRunner&&testRunner.waitUntilDone(),Markup.noAutoDump()},Markup.notifyDone=function(){window.testRunner&&testRunner.waitUntilDone(),Markup._dumpCalls||Markup.dump(),window.testRunner&&(document.body.innerHTML=""),document.body.appendChild(Markup._container),window.testRunner&&testRunner.notifyDone()},Markup.useHTML5libOutputFormat=function(){Markup._useHTML5libOutputFormat=!0},Markup.get=function(e){var t={},r=Markup._getShadowHostIfPossible(e,0,t);if(r)return r.substring(1);if(!e.firstChild)return"| ";for(var a=0,n=e.childNodes.length;a<n;a++)r+=Markup._get(e.childNodes[a],0,t);return r.substring(1)},Markup._get=function(e,t,r){var a=Markup._indent(t);switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:a+="<!DOCTYPE "+e.nodeName,(e.publicId||e.systemId)&&(a+=' "'+e.publicId+'"',a+=' "'+e.systemId+'"'),a+=">";break;case Node.COMMENT_NODE:try{a+="<!-- "+e.nodeValue+" -->"}catch(e){a+="<!--  -->"}break;case Node.PROCESSING_INSTRUCTION_NODE:a+="<?"+e.nodeName+e.nodeValue+">";break;case Node.CDATA_SECTION_NODE:a+="<![CDATA[ "+e.nodeValue+" ]]>";break;case Node.TEXT_NODE:a+='"'+Markup._getMarkupForTextNode(e)+'"';break;case Node.ELEMENT_NODE:if(a+="<",a+=Markup._namespace(e),a+=e.localName&&e.namespaceURI&&null!=e.namespaceURI?e.localName:Markup._toAsciiLowerCase(e.nodeName),a+=">",e.attributes){for(var n=[],u={},o=0;o<e.attributes.length;o+=1){var s=Markup._namespace(e.attributes[o]);s+=e.attributes[o].localName||e.attributes[o].nodeName,n.push(s),u[s]=o}if(n.length>0){n.sort();for(var o=0;o<n.length;o+=1)a+=Markup._indent(t+1)+n[o],a+='="'+e.attributes[u[n[o]]].value+'"'}}if(!Markup._useHTML5libOutputFormat&&window.internals){var p=window.internals.shadowPseudoId(e);p&&(a+=Markup._indent(t+1)+'shadow:pseudoId="'+p+'"')}Markup._useHTML5libOutputFormat||"INPUT"!=e.nodeName&&"TEXTAREA"!=e.nodeName||(a+=Markup._indent(t+1)+'this.value="'+e.value+'"');break;case Node.DOCUMENT_FRAGMENT_NODE:a+=r&&internals.address(e)in r?"<shadow:root>":"content"}(e.namespaceURI="TEMPLATE"==e.tagName)&&(a+=Markup._get(e.content,t+1,r));for(var i=0,d=e.childNodes.length;i<d;i++){var M=Markup._getSelectionMarker(e,i);M&&(a+=Markup._indent(t+1)+M),a+=Markup._get(e.childNodes[i],t+1,r)}a+=Markup._getShadowHostIfPossible(e,t,r);var M=Markup._getSelectionMarker(e,i);return M&&(a+=Markup._indent(t+1)+M),a},Markup._getShadowHostIfPossible=function(e,t,r){if(!Markup._useHTML5libOutputFormat&&e.nodeType==Node.ELEMENT_NODE&&window.internals){var a=window.internals.shadowRoot(e);if(a)return r[internals.address(a)]=!0,Markup._get(a,t+1,r)}return""},Markup._namespace=function(e){return Markup._NAMESPACE_URI_MAP[e.namespaceURI]?Markup._NAMESPACE_URI_MAP[e.namespaceURI]+" ":""},Markup._dumpCalls=0,Markup._indent=function(e){return"\n| "+new Array(2*e+1).join(" ")},Markup._toAsciiLowerCase=function(e){for(var t="",r=0,a=this.length;r<a;++r)t+=e.charCodeAt(r)>=65&&e.charCodeAt(r)<=90?String.fromCharCode(e.charCodeAt(r)+32):e.charAt(r);return t},Markup._NAMESPACE_URI_MAP={"http://www.w3.org/2000/svg":"svg","http://www.w3.org/1998/Math/MathML":"math","http://www.w3.org/XML/1998/namespace":"xml","http://www.w3.org/2000/xmlns/":"xmlns","http://www.w3.org/1999/xlink":"xlink"},Markup._getSelectionFromNode=function(e){return e.ownerDocument.defaultView?e.ownerDocument.defaultView.getSelection():null},Markup._SELECTION_FOCUS="<#selection-focus>",Markup._SELECTION_ANCHOR="<#selection-anchor>",Markup._SELECTION_CARET="<#selection-caret>",Markup._getMarkupForTextNode=function(e){innerMarkup=e.nodeValue;var t,r,a,n,u=Markup._getSelectionFromNode(e);return u&&(e==u.anchorNode&&e==u.focusNode?u.isCollapsed?(t=u.anchorOffset,a=Markup._SELECTION_CARET):u.focusOffset>u.anchorOffset?(t=u.anchorOffset,r=u.focusOffset,a=Markup._SELECTION_ANCHOR,n=Markup._SELECTION_FOCUS):(t=u.focusOffset,r=u.anchorOffset,a=Markup._SELECTION_FOCUS,n=Markup._SELECTION_ANCHOR):e==u.focusNode?(t=u.focusOffset,a=Markup._SELECTION_FOCUS):e==u.anchorNode&&(t=u.anchorOffset,a=Markup._SELECTION_ANCHOR)),a&&n?innerMarkup=innerMarkup.substring(0,t)+a+innerMarkup.substring(t,r)+n+innerMarkup.substring(r):a&&(innerMarkup=innerMarkup.substring(0,t)+a+innerMarkup.substring(t)),innerMarkup},Markup._getSelectionMarker=function(e,t){if(1!=e.nodeType)return"";var r=Markup._getSelectionFromNode(e);return r?t==r.anchorOffset&&e==r.anchorNode?r.isCollapsed?Markup._SELECTION_CARET:Markup._SELECTION_ANCHOR:t==r.focusOffset&&e==r.focusNode?Markup._SELECTION_FOCUS:"":""},window.addEventListener("load",Markup.notifyDone,!1);