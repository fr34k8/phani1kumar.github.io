window.testRunner&&testRunner.dumpAsText();var Magnitude={};Magnitude.description=function(n){Magnitude._log(n)},Magnitude.initialExponent=0,Magnitude.numPoints=8,Magnitude.numTrials=3,Magnitude.successThreshold=.5,Magnitude.millisecondsPerRun=25,Magnitude.trim=0,Magnitude.tolerance=.05,Magnitude.CONSTANT="O(1)",Magnitude.LINEAR="O(n)",Magnitude.POLYNOMIAL=">=O(n^2)",Magnitude._max=function(n){return Math.max.apply(null,n)},Magnitude._min=function(n){return Math.min.apply(null,n)},Magnitude._sortTrimArray=function(n,e){var t=n.map(Math.abs).sort(function(n,e){return n-e});return e?t.slice(e,-e):t},Magnitude._relativeDeviations=function(n,e){return n.map(function(n){return(n-e)/e})},Magnitude._absSortDownTrimTop=function(n,e){return void 0===e&&(e=0),n.map(Math.abs).sort(function(n,e){return e-n}).slice(e)},Magnitude._median=function(n){n.sort(function(n,e){return n-e});var e=n.length;if(e){var t=Math.floor(e/2);return e%2?n[t]:(n[t-1]+n[t])/2}},Magnitude._log=function(n){Magnitude._container||(Magnitude._container=document.createElement("pre")),Magnitude._container.appendChild(document.createTextNode(n+"\n"))},Magnitude._debug=function(n){Magnitude._debugLog+=n+"\n"},Magnitude._logRunTimes=function(){Magnitude._debug("magnitudes: "+Magnitude._magnitudes.join(",")),Magnitude._debug("times: "+Magnitude._times.join(","))},Magnitude._for=function(n,e,t){function i(d){a.push(d),++u===n?t(a):e(u,i)}var u=0,a=[];if(Magnitude._async)e(u,i);else{for(;u<n;++u)e(u,function(n){a.push(n)});t(a)}},Magnitude._while=function(n,e,t){function i(){n()?e(i):t()}if(Magnitude._async)i();else{for(;n();)e(function(){});t()}},Magnitude.run=function(n,e,t){function i(n,t){e(n),t()}Magnitude._run(n,i,t,!1)},Magnitude.runAsync=function(n,e,t){window.testRunner&&testRunner.waitUntilDone(),window.addEventListener("load",function(){Magnitude._run(n,e,t,!0)},!1)},Magnitude._run=function(n,e,t,i){function u(t,i){Magnitude._trialNumber=t,Magnitude._debug("\nTrial #"+t),Magnitude._for(Magnitude.numPoints,Magnitude._runTime.bind(null,n,e),a.bind(null,i))}function a(n,e){switch(Magnitude._times=e,Magnitude._logRunTimes(),t){case Magnitude.CONSTANT:passed=Magnitude._isConstant();break;case Magnitude.LINEAR:passed=Magnitude._isLinear();break;case Magnitude.POLYNOMIAL:passed=Magnitude._isPolynomial();break;default:Magnitude._log("FAIL: unrecognized order of growth: "+t),passed=!1}Magnitude._debug("Trial #"+Magnitude._trialNumber+": "+(passed?"SUCCESS":"FAILURE")),passed&&Magnitude._numSuccesses++,n()}Magnitude._async=i,Magnitude._debugLog="\nDEBUG LOG:\n",Magnitude._debug("Expected complexity: "+t),Magnitude._exponents=[],Magnitude._magnitudes=[];for(var d=Magnitude.initialExponent+Magnitude.numPoints,o=Magnitude.initialExponent;o<d;o++)Magnitude._exponents.push(o),Magnitude._magnitudes.push(Math.pow(2,o));Magnitude._numSuccesses=0,Magnitude._for(Magnitude.numTrials,u,Magnitude._finish)},Magnitude._finish=function(){var n=Magnitude.numTrials*Magnitude.successThreshold;Magnitude._debug("Successes: "+Magnitude._numSuccesses+", need "+n+" ("+100*Magnitude.successThreshold+"%) to pass");var e=Magnitude._numSuccesses>=n;Magnitude._log(e?"PASS":"FAIL"),window.testRunner&&e||Magnitude._log(Magnitude._debugLog),Magnitude._async&&window.testRunner&&testRunner.notifyDone()},Magnitude._runTime=function(n,e,t,i){function u(n){function t(n){s++,r=M()-i,n()}var i=M();s=0,r=0,Magnitude._while(function(){return r<Magnitude.millisecondsPerRun},function(n){e(d,t.bind(null,n))},a.bind(null,n))}function a(n){g=r/s,Magnitude._debug(s+" iterations in "+r+" milliseconds, average "+g+" milliseconds per iteration");var e=r-Magnitude.millisecondsPerRun,t=.001,i=Magnitude.millisecondsPerRun*t;e<g+i?c=!0:(Magnitude._debug("over-time: "+e+" exceeds average run-time "+g+" by more than tolerance of "+i+" assuming delay"),l++,l<_?Magnitude._debug("Retrying to reduce delay noise"):(Magnitude._debug("Failed to reduce delay noise after "+_+" attempts, proceeding with noisy data"),c=!0)),n()}var d=Magnitude._magnitudes[t];n(d);var o="run for magnitude "+d;window.GCController&&(GCController.getJSObjectCount&&(o+=" jsObjectCountBefore "+GCController.getJSObjectCount()),GCController.collectAll(),GCController.getJSObjectCount&&(o+=" jsObjectCountAfter "+GCController.getJSObjectCount())),Magnitude._debug(o);var g,r,s,M=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now,c=!1,l=0,_=5;Magnitude._while(function(){return!c},u,function(){i(g)})},Magnitude._log2Ratios=function(){for(var n=[],e=[],t=0;t<Magnitude.numPoints-1;t++){var i=Magnitude._times[t+1]/Magnitude._times[t],u=Math.log(i)/Math.log(2);n.push(i),e.push(u)}return Magnitude._debug("ratios: "+n.join(",")),Magnitude._debug("log-ratios (base 2): "+e.join(",")),e},Magnitude._isConstant=function(){var n=Magnitude._times,e=Magnitude._median(n),t=Magnitude._relativeDeviations(n,e);Magnitude._debug("Median time: "+e),Magnitude._debug("Relative deviations: "+t.join(","));var i=Magnitude._absSortDownTrimTop(t,Magnitude.trim);Magnitude._debug("Trimmed sorted absolute relative deviations: "+i.join(","));var u=i[0];return Magnitude._debug("Maximum Absolute Relative Deviation: "+u),u<=Magnitude.tolerance},Magnitude._isLinear=function(){var n=Magnitude._log2Ratios(),e=Magnitude._sortTrimArray(n,Magnitude.trim),t=Magnitude._min(e),i=Magnitude._max(e),u=Math.max(Math.abs(1-t),Math.abs(i-1));return Magnitude._debug("Maximum Absolute Deviation: "+u),Magnitude._debug("Tolerance: "+Magnitude.tolerance),u<=Magnitude.tolerance},Magnitude._isPolynomial=function(){var n=Magnitude._log2Ratios(),e=Magnitude._sortTrimArray(n,Magnitude.trim),t=Magnitude._min(e),i=Math.abs(2-t);return Magnitude._debug("Absolute Deviation of Minimum: "+i),Magnitude._debug("Tolerance: "+Magnitude.tolerance),i<=Magnitude.tolerance},window.addEventListener("load",function(){window.testRunner&&(document.body.innerHTML=""),document.body.appendChild(Magnitude._container)},!1);